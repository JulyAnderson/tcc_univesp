2024-10-21 13:38:48,586 - INFO - Iniciando a carga dos dados do arquivo pickle...
2024-10-21 13:38:48,623 - INFO - Dados carregados com sucesso. Shape final: (2188, 40)
2024-10-21 13:38:48,628 - INFO - Colunas de data removidas. Shape final: (2188, 36)
2024-10-21 13:38:48,629 - INFO - Iniciando detecção de anomalias...
2024-10-21 13:38:48,630 - INFO - Iniciando treinamento e validação dos modelos...
2024-10-21 13:38:48,632 - INFO - Shape dos dados de entrada: (2188, 36)
2024-10-21 13:38:48,635 - INFO - Tipos de dados:
valorTotalHomologado                   float64
srp                                       bool
anoCompra                              float64
sequencialCompra                       float64
processo                                object
valorTotalEstimado                     float64
unidadeOrgao.codigoUnidade              object
unidadeOrgao.codigoIbge                float64
modoDisputaId_4                           bool
modoDisputaId_5                           bool
situacaoCompraId_1                        bool
situacaoCompraId_2                        bool
situacaoCompraId_3                        bool
tipoInstrumentoConvocatorioCodigo_2       bool
tipoInstrumentoConvocatorioCodigo_3       bool
amparoLegal.codigo_18                     bool
amparoLegal.codigo_19                     bool
amparoLegal.codigo_20                     bool
amparoLegal.codigo_21                     bool
amparoLegal.codigo_22                     bool
amparoLegal.codigo_24                     bool
amparoLegal.codigo_36                     bool
amparoLegal.codigo_37                     bool
amparoLegal.codigo_38                     bool
amparoLegal.codigo_39                     bool
amparoLegal.codigo_41                     bool
amparoLegal.codigo_45                     bool
orgaoEntidade.poderId_E                   bool
orgaoEntidade.poderId_J                   bool
orgaoEntidade.poderId_L                   bool
orgaoEntidade.poderId_N                   bool
orgaoEntidade.esferaId_D                  bool
orgaoEntidade.esferaId_E                  bool
orgaoEntidade.esferaId_F                  bool
orgaoEntidade.esferaId_M                  bool
orgaoEntidade.esferaId_N                  bool
dtype: object
2024-10-21 13:38:48,657 - INFO - Resumo estatístico:
       valorTotalHomologado     anoCompra  sequencialCompra  \
count          2.188000e+03  2.188000e+03      2.188000e+03   
mean          -3.247453e-18  1.877807e-13      2.597962e-17   
std            1.000229e+00  1.000229e+00      1.000229e+00   
min           -6.100168e-02 -8.116849e-01     -5.029182e-01   
25%           -5.863380e-02 -8.116849e-01     -4.958260e-01   
50%           -5.432531e-02 -8.116849e-01     -4.414523e-01   
75%           -4.133326e-02  1.232005e+00      3.652867e-01   
max            3.691960e+01  1.232005e+00      2.023471e+01   

       valorTotalEstimado  unidadeOrgao.codigoIbge  
count        2.188000e+03             2.188000e+03  
mean        -3.247453e-18             2.597962e-16  
std          1.000229e+00             1.000229e+00  
min         -7.237697e-02            -3.684605e+00  
25%         -7.078153e-02            -3.562441e-01  
50%         -6.545051e-02             5.873110e-01  
75%         -4.063650e-02             5.933565e-01  
max          3.576946e+01             6.757970e-01  
2024-10-21 13:38:48,660 - INFO - Colunas: ['valorTotalHomologado', 'srp', 'anoCompra', 'sequencialCompra', 'processo', 'valorTotalEstimado', 'unidadeOrgao.codigoUnidade', 'unidadeOrgao.codigoIbge', 'modoDisputaId_4', 'modoDisputaId_5', 'situacaoCompraId_1', 'situacaoCompraId_2', 'situacaoCompraId_3', 'tipoInstrumentoConvocatorioCodigo_2', 'tipoInstrumentoConvocatorioCodigo_3', 'amparoLegal.codigo_18', 'amparoLegal.codigo_19', 'amparoLegal.codigo_20', 'amparoLegal.codigo_21', 'amparoLegal.codigo_22', 'amparoLegal.codigo_24', 'amparoLegal.codigo_36', 'amparoLegal.codigo_37', 'amparoLegal.codigo_38', 'amparoLegal.codigo_39', 'amparoLegal.codigo_41', 'amparoLegal.codigo_45', 'orgaoEntidade.poderId_E', 'orgaoEntidade.poderId_J', 'orgaoEntidade.poderId_L', 'orgaoEntidade.poderId_N', 'orgaoEntidade.esferaId_D', 'orgaoEntidade.esferaId_E', 'orgaoEntidade.esferaId_F', 'orgaoEntidade.esferaId_M', 'orgaoEntidade.esferaId_N']
2024-10-21 13:38:48,661 - INFO - Tentando treinar modelo: IsolationForest
2024-10-21 13:38:48,673 - INFO - Usando fit_predict para IsolationForest
2024-10-21 13:38:48,679 - ERROR - Erro ao treinar IsolationForest: could not convert string to float: '112692/2022'
2024-10-21 13:38:48,680 - ERROR - Traceback completo:
Traceback (most recent call last):
  File "<ipython-input-6-37568f817aa0>", line 135, in train_validate_models
    y_pred = model.fit_predict(X_preprocessed)
  File "g:\Area de Trabalho\Anderson\tcc_univesp\venv\lib\site-packages\sklearn\base.py", line 1036, in fit_predict
    return self.fit(X).predict(X)
  File "g:\Area de Trabalho\Anderson\tcc_univesp\venv\lib\site-packages\sklearn\base.py", line 1152, in wrapper
    return fit_method(estimator, *args, **kwargs)
  File "g:\Area de Trabalho\Anderson\tcc_univesp\venv\lib\site-packages\sklearn\ensemble\_iforest.py", line 290, in fit
    X = self._validate_data(X, accept_sparse=["csc"], dtype=tree_dtype)
  File "g:\Area de Trabalho\Anderson\tcc_univesp\venv\lib\site-packages\sklearn\base.py", line 605, in _validate_data
    out = check_array(X, input_name="X", **check_params)
  File "g:\Area de Trabalho\Anderson\tcc_univesp\venv\lib\site-packages\sklearn\utils\validation.py", line 836, in check_array
    array = array.astype(new_dtype)
  File "g:\Area de Trabalho\Anderson\tcc_univesp\venv\lib\site-packages\pandas\core\generic.py", line 6324, in astype
    new_data = self._mgr.astype(dtype=dtype, copy=copy, errors=errors)
  File "g:\Area de Trabalho\Anderson\tcc_univesp\venv\lib\site-packages\pandas\core\internals\managers.py", line 451, in astype
    return self.apply(
  File "g:\Area de Trabalho\Anderson\tcc_univesp\venv\lib\site-packages\pandas\core\internals\managers.py", line 352, in apply
    applied = getattr(b, f)(**kwargs)
  File "g:\Area de Trabalho\Anderson\tcc_univesp\venv\lib\site-packages\pandas\core\internals\blocks.py", line 511, in astype
    new_values = astype_array_safe(values, dtype, copy=copy, errors=errors)
  File "g:\Area de Trabalho\Anderson\tcc_univesp\venv\lib\site-packages\pandas\core\dtypes\astype.py", line 242, in astype_array_safe
    new_values = astype_array(values, dtype, copy=copy)
  File "g:\Area de Trabalho\Anderson\tcc_univesp\venv\lib\site-packages\pandas\core\dtypes\astype.py", line 187, in astype_array
    values = _astype_nansafe(values, dtype, copy=copy)
  File "g:\Area de Trabalho\Anderson\tcc_univesp\venv\lib\site-packages\pandas\core\dtypes\astype.py", line 138, in _astype_nansafe
    return arr.astype(dtype, copy=True)
ValueError: could not convert string to float: '112692/2022'
2024-10-21 13:38:48,722 - INFO - Tentando treinar modelo: DBSCAN
2024-10-21 13:38:48,730 - INFO - Usando fit_predict para DBSCAN
2024-10-21 13:38:48,732 - ERROR - Erro ao treinar DBSCAN: could not convert string to float: '112692/2022'
2024-10-21 13:38:48,733 - ERROR - Traceback completo:
Traceback (most recent call last):
  File "<ipython-input-6-37568f817aa0>", line 135, in train_validate_models
    y_pred = model.fit_predict(X_preprocessed)
  File "g:\Area de Trabalho\Anderson\tcc_univesp\venv\lib\site-packages\sklearn\cluster\_dbscan.py", line 454, in fit_predict
    self.fit(X, sample_weight=sample_weight)
  File "g:\Area de Trabalho\Anderson\tcc_univesp\venv\lib\site-packages\sklearn\base.py", line 1152, in wrapper
    return fit_method(estimator, *args, **kwargs)
  File "g:\Area de Trabalho\Anderson\tcc_univesp\venv\lib\site-packages\sklearn\cluster\_dbscan.py", line 376, in fit
    X = self._validate_data(X, accept_sparse="csr")
  File "g:\Area de Trabalho\Anderson\tcc_univesp\venv\lib\site-packages\sklearn\base.py", line 605, in _validate_data
    out = check_array(X, input_name="X", **check_params)
  File "g:\Area de Trabalho\Anderson\tcc_univesp\venv\lib\site-packages\sklearn\utils\validation.py", line 836, in check_array
    array = array.astype(new_dtype)
  File "g:\Area de Trabalho\Anderson\tcc_univesp\venv\lib\site-packages\pandas\core\generic.py", line 6324, in astype
    new_data = self._mgr.astype(dtype=dtype, copy=copy, errors=errors)
  File "g:\Area de Trabalho\Anderson\tcc_univesp\venv\lib\site-packages\pandas\core\internals\managers.py", line 451, in astype
    return self.apply(
  File "g:\Area de Trabalho\Anderson\tcc_univesp\venv\lib\site-packages\pandas\core\internals\managers.py", line 352, in apply
    applied = getattr(b, f)(**kwargs)
  File "g:\Area de Trabalho\Anderson\tcc_univesp\venv\lib\site-packages\pandas\core\internals\blocks.py", line 511, in astype
    new_values = astype_array_safe(values, dtype, copy=copy, errors=errors)
  File "g:\Area de Trabalho\Anderson\tcc_univesp\venv\lib\site-packages\pandas\core\dtypes\astype.py", line 242, in astype_array_safe
    new_values = astype_array(values, dtype, copy=copy)
  File "g:\Area de Trabalho\Anderson\tcc_univesp\venv\lib\site-packages\pandas\core\dtypes\astype.py", line 187, in astype_array
    values = _astype_nansafe(values, dtype, copy=copy)
  File "g:\Area de Trabalho\Anderson\tcc_univesp\venv\lib\site-packages\pandas\core\dtypes\astype.py", line 138, in _astype_nansafe
    return arr.astype(dtype, copy=True)
ValueError: could not convert string to float: '112692/2022'
2024-10-21 13:38:48,777 - INFO - Tentando treinar modelo: LOF
2024-10-21 13:38:48,782 - INFO - Usando fit_predict para LOF
2024-10-21 13:38:48,785 - ERROR - Erro ao treinar LOF: could not convert string to float: '112692/2022'
2024-10-21 13:38:48,786 - ERROR - Traceback completo:
Traceback (most recent call last):
  File "<ipython-input-6-37568f817aa0>", line 135, in train_validate_models
    y_pred = model.fit_predict(X_preprocessed)
  File "g:\Area de Trabalho\Anderson\tcc_univesp\venv\lib\site-packages\sklearn\neighbors\_lof.py", line 256, in fit_predict
    return self.fit(X)._predict()
  File "g:\Area de Trabalho\Anderson\tcc_univesp\venv\lib\site-packages\sklearn\base.py", line 1152, in wrapper
    return fit_method(estimator, *args, **kwargs)
  File "g:\Area de Trabalho\Anderson\tcc_univesp\venv\lib\site-packages\sklearn\neighbors\_lof.py", line 279, in fit
    self._fit(X)
  File "g:\Area de Trabalho\Anderson\tcc_univesp\venv\lib\site-packages\sklearn\neighbors\_base.py", line 498, in _fit
    X = self._validate_data(X, accept_sparse="csr", order="C")
  File "g:\Area de Trabalho\Anderson\tcc_univesp\venv\lib\site-packages\sklearn\base.py", line 605, in _validate_data
    out = check_array(X, input_name="X", **check_params)
  File "g:\Area de Trabalho\Anderson\tcc_univesp\venv\lib\site-packages\sklearn\utils\validation.py", line 836, in check_array
    array = array.astype(new_dtype)
  File "g:\Area de Trabalho\Anderson\tcc_univesp\venv\lib\site-packages\pandas\core\generic.py", line 6324, in astype
    new_data = self._mgr.astype(dtype=dtype, copy=copy, errors=errors)
  File "g:\Area de Trabalho\Anderson\tcc_univesp\venv\lib\site-packages\pandas\core\internals\managers.py", line 451, in astype
    return self.apply(
  File "g:\Area de Trabalho\Anderson\tcc_univesp\venv\lib\site-packages\pandas\core\internals\managers.py", line 352, in apply
    applied = getattr(b, f)(**kwargs)
  File "g:\Area de Trabalho\Anderson\tcc_univesp\venv\lib\site-packages\pandas\core\internals\blocks.py", line 511, in astype
    new_values = astype_array_safe(values, dtype, copy=copy, errors=errors)
  File "g:\Area de Trabalho\Anderson\tcc_univesp\venv\lib\site-packages\pandas\core\dtypes\astype.py", line 242, in astype_array_safe
    new_values = astype_array(values, dtype, copy=copy)
  File "g:\Area de Trabalho\Anderson\tcc_univesp\venv\lib\site-packages\pandas\core\dtypes\astype.py", line 187, in astype_array
    values = _astype_nansafe(values, dtype, copy=copy)
  File "g:\Area de Trabalho\Anderson\tcc_univesp\venv\lib\site-packages\pandas\core\dtypes\astype.py", line 138, in _astype_nansafe
    return arr.astype(dtype, copy=True)
ValueError: could not convert string to float: '112692/2022'
2024-10-21 13:38:48,829 - INFO - Tentando treinar modelo: KMeans
2024-10-21 13:38:48,836 - INFO - Usando fit_predict para KMeans
2024-10-21 13:38:48,839 - ERROR - Erro ao treinar KMeans: could not convert string to float: '112692/2022'
2024-10-21 13:38:48,840 - ERROR - Traceback completo:
Traceback (most recent call last):
  File "<ipython-input-6-37568f817aa0>", line 135, in train_validate_models
    y_pred = model.fit_predict(X_preprocessed)
  File "g:\Area de Trabalho\Anderson\tcc_univesp\venv\lib\site-packages\sklearn\cluster\_kmeans.py", line 1069, in fit_predict
    return self.fit(X, sample_weight=sample_weight).labels_
  File "g:\Area de Trabalho\Anderson\tcc_univesp\venv\lib\site-packages\sklearn\base.py", line 1152, in wrapper
    return fit_method(estimator, *args, **kwargs)
  File "g:\Area de Trabalho\Anderson\tcc_univesp\venv\lib\site-packages\sklearn\cluster\_kmeans.py", line 1475, in fit
    X = self._validate_data(
  File "g:\Area de Trabalho\Anderson\tcc_univesp\venv\lib\site-packages\sklearn\base.py", line 605, in _validate_data
    out = check_array(X, input_name="X", **check_params)
  File "g:\Area de Trabalho\Anderson\tcc_univesp\venv\lib\site-packages\sklearn\utils\validation.py", line 836, in check_array
    array = array.astype(new_dtype)
  File "g:\Area de Trabalho\Anderson\tcc_univesp\venv\lib\site-packages\pandas\core\generic.py", line 6324, in astype
    new_data = self._mgr.astype(dtype=dtype, copy=copy, errors=errors)
  File "g:\Area de Trabalho\Anderson\tcc_univesp\venv\lib\site-packages\pandas\core\internals\managers.py", line 451, in astype
    return self.apply(
  File "g:\Area de Trabalho\Anderson\tcc_univesp\venv\lib\site-packages\pandas\core\internals\managers.py", line 352, in apply
    applied = getattr(b, f)(**kwargs)
  File "g:\Area de Trabalho\Anderson\tcc_univesp\venv\lib\site-packages\pandas\core\internals\blocks.py", line 511, in astype
    new_values = astype_array_safe(values, dtype, copy=copy, errors=errors)
  File "g:\Area de Trabalho\Anderson\tcc_univesp\venv\lib\site-packages\pandas\core\dtypes\astype.py", line 242, in astype_array_safe
    new_values = astype_array(values, dtype, copy=copy)
  File "g:\Area de Trabalho\Anderson\tcc_univesp\venv\lib\site-packages\pandas\core\dtypes\astype.py", line 187, in astype_array
    values = _astype_nansafe(values, dtype, copy=copy)
  File "g:\Area de Trabalho\Anderson\tcc_univesp\venv\lib\site-packages\pandas\core\dtypes\astype.py", line 138, in _astype_nansafe
    return arr.astype(dtype, copy=True)
ValueError: could not convert string to float: '112692/2022'
2024-10-21 13:38:48,864 - ERROR - Erro durante a análise: None
2024-10-21 13:44:21,786 - INFO - Iniciando a carga dos dados do arquivo pickle...
2024-10-21 13:44:21,799 - INFO - Dados carregados com sucesso. Shape final: (2188, 38)
2024-10-21 13:44:21,801 - INFO - Colunas de data removidas. Shape final: (2188, 34)
2024-10-21 13:44:21,802 - INFO - Iniciando detecção de anomalias...
2024-10-21 13:44:21,804 - INFO - Iniciando treinamento e validação dos modelos...
2024-10-21 13:44:21,805 - INFO - Shape dos dados de entrada: (2188, 34)
2024-10-21 13:44:21,809 - INFO - Tipos de dados:
valorTotalHomologado                   float64
srp                                       bool
anoCompra                              float64
sequencialCompra                       float64
valorTotalEstimado                     float64
unidadeOrgao.codigoIbge                float64
modoDisputaId_4                           bool
modoDisputaId_5                           bool
situacaoCompraId_1                        bool
situacaoCompraId_2                        bool
situacaoCompraId_3                        bool
tipoInstrumentoConvocatorioCodigo_2       bool
tipoInstrumentoConvocatorioCodigo_3       bool
amparoLegal.codigo_18                     bool
amparoLegal.codigo_19                     bool
amparoLegal.codigo_20                     bool
amparoLegal.codigo_21                     bool
amparoLegal.codigo_22                     bool
amparoLegal.codigo_24                     bool
amparoLegal.codigo_36                     bool
amparoLegal.codigo_37                     bool
amparoLegal.codigo_38                     bool
amparoLegal.codigo_39                     bool
amparoLegal.codigo_41                     bool
amparoLegal.codigo_45                     bool
orgaoEntidade.poderId_E                   bool
orgaoEntidade.poderId_J                   bool
orgaoEntidade.poderId_L                   bool
orgaoEntidade.poderId_N                   bool
orgaoEntidade.esferaId_D                  bool
orgaoEntidade.esferaId_E                  bool
orgaoEntidade.esferaId_F                  bool
orgaoEntidade.esferaId_M                  bool
orgaoEntidade.esferaId_N                  bool
dtype: object
2024-10-21 13:44:21,825 - INFO - Resumo estatístico:
       valorTotalHomologado     anoCompra  sequencialCompra  \
count          2.188000e+03  2.188000e+03      2.188000e+03   
mean          -3.247453e-18  1.877807e-13      2.597962e-17   
std            1.000229e+00  1.000229e+00      1.000229e+00   
min           -6.100168e-02 -8.116849e-01     -5.029182e-01   
25%           -5.863380e-02 -8.116849e-01     -4.958260e-01   
50%           -5.432531e-02 -8.116849e-01     -4.414523e-01   
75%           -4.133326e-02  1.232005e+00      3.652867e-01   
max            3.691960e+01  1.232005e+00      2.023471e+01   

       valorTotalEstimado  unidadeOrgao.codigoIbge  
count        2.188000e+03             2.188000e+03  
mean        -3.247453e-18             2.597962e-16  
std          1.000229e+00             1.000229e+00  
min         -7.237697e-02            -3.684605e+00  
25%         -7.078153e-02            -3.562441e-01  
50%         -6.545051e-02             5.873110e-01  
75%         -4.063650e-02             5.933565e-01  
max          3.576946e+01             6.757970e-01  
2024-10-21 13:44:21,828 - INFO - Colunas: ['valorTotalHomologado', 'srp', 'anoCompra', 'sequencialCompra', 'valorTotalEstimado', 'unidadeOrgao.codigoIbge', 'modoDisputaId_4', 'modoDisputaId_5', 'situacaoCompraId_1', 'situacaoCompraId_2', 'situacaoCompraId_3', 'tipoInstrumentoConvocatorioCodigo_2', 'tipoInstrumentoConvocatorioCodigo_3', 'amparoLegal.codigo_18', 'amparoLegal.codigo_19', 'amparoLegal.codigo_20', 'amparoLegal.codigo_21', 'amparoLegal.codigo_22', 'amparoLegal.codigo_24', 'amparoLegal.codigo_36', 'amparoLegal.codigo_37', 'amparoLegal.codigo_38', 'amparoLegal.codigo_39', 'amparoLegal.codigo_41', 'amparoLegal.codigo_45', 'orgaoEntidade.poderId_E', 'orgaoEntidade.poderId_J', 'orgaoEntidade.poderId_L', 'orgaoEntidade.poderId_N', 'orgaoEntidade.esferaId_D', 'orgaoEntidade.esferaId_E', 'orgaoEntidade.esferaId_F', 'orgaoEntidade.esferaId_M', 'orgaoEntidade.esferaId_N']
2024-10-21 13:44:21,829 - INFO - Tentando treinar modelo: IsolationForest
2024-10-21 13:44:21,834 - INFO - Usando fit_predict para IsolationForest
2024-10-21 13:44:22,210 - INFO - Modelo IsolationForest treinado com sucesso
2024-10-21 13:44:22,467 - WARNING - Erro ao calcular índice Dunn: Unsupported dtype object
2024-10-21 13:44:22,468 - INFO - Métricas calculadas para IsolationForest: {'mean_silhouette': 0.2978871772881016, 'mean_dunn': 0.0}
2024-10-21 13:44:22,470 - INFO - Tentando treinar modelo: DBSCAN
2024-10-21 13:44:22,479 - INFO - Usando fit_predict para DBSCAN
2024-10-21 13:44:22,957 - INFO - Modelo DBSCAN treinado com sucesso
2024-10-21 13:44:23,092 - WARNING - Erro ao calcular índice Dunn: Unsupported dtype object
2024-10-21 13:44:23,095 - INFO - Métricas calculadas para DBSCAN: {'mean_silhouette': 0.6199220975998188, 'mean_dunn': 0.0}
2024-10-21 13:44:23,096 - INFO - Tentando treinar modelo: LOF
2024-10-21 13:44:23,102 - INFO - Usando fit_predict para LOF
2024-10-21 13:44:23,152 - INFO - Modelo LOF treinado com sucesso
2024-10-21 13:44:23,302 - WARNING - Erro ao calcular índice Dunn: Unsupported dtype object
2024-10-21 13:44:23,304 - INFO - Métricas calculadas para LOF: {'mean_silhouette': 0.2374727675581046, 'mean_dunn': 0.0}
2024-10-21 13:44:23,305 - INFO - Tentando treinar modelo: KMeans
2024-10-21 13:44:23,312 - INFO - Usando fit_predict para KMeans
2024-10-21 13:44:23,377 - INFO - Modelo KMeans treinado com sucesso
2024-10-21 13:44:23,607 - WARNING - Erro ao calcular índice Dunn: Unsupported dtype object
2024-10-21 13:44:23,609 - INFO - Métricas calculadas para KMeans: {'mean_silhouette': 0.9346844436767242, 'mean_dunn': 0.0}
2024-10-21 13:44:23,616 - ERROR - Erro durante a análise: 'function' object has no attribute 'transform'
2024-10-21 13:50:33,345 - INFO - Iniciando a carga dos dados do arquivo pickle...
2024-10-21 13:50:33,397 - INFO - Dados carregados com sucesso. Shape final: (2188, 38)
2024-10-21 13:50:33,403 - INFO - Colunas de data removidas. Shape final: (2188, 34)
2024-10-21 13:50:33,405 - INFO - Iniciando detecção de anomalias...
2024-10-21 13:50:33,407 - INFO - Iniciando treinamento e validação dos modelos...
2024-10-21 13:50:33,409 - INFO - Shape dos dados de entrada: (2188, 34)
2024-10-21 13:50:33,416 - INFO - Tipos de dados:
valorTotalHomologado                   float64
srp                                       bool
anoCompra                              float64
sequencialCompra                       float64
valorTotalEstimado                     float64
unidadeOrgao.codigoIbge                float64
modoDisputaId_4                           bool
modoDisputaId_5                           bool
situacaoCompraId_1                        bool
situacaoCompraId_2                        bool
situacaoCompraId_3                        bool
tipoInstrumentoConvocatorioCodigo_2       bool
tipoInstrumentoConvocatorioCodigo_3       bool
amparoLegal.codigo_18                     bool
amparoLegal.codigo_19                     bool
amparoLegal.codigo_20                     bool
amparoLegal.codigo_21                     bool
amparoLegal.codigo_22                     bool
amparoLegal.codigo_24                     bool
amparoLegal.codigo_36                     bool
amparoLegal.codigo_37                     bool
amparoLegal.codigo_38                     bool
amparoLegal.codigo_39                     bool
amparoLegal.codigo_41                     bool
amparoLegal.codigo_45                     bool
orgaoEntidade.poderId_E                   bool
orgaoEntidade.poderId_J                   bool
orgaoEntidade.poderId_L                   bool
orgaoEntidade.poderId_N                   bool
orgaoEntidade.esferaId_D                  bool
orgaoEntidade.esferaId_E                  bool
orgaoEntidade.esferaId_F                  bool
orgaoEntidade.esferaId_M                  bool
orgaoEntidade.esferaId_N                  bool
dtype: object
2024-10-21 13:50:33,456 - INFO - Resumo estatístico:
       valorTotalHomologado     anoCompra  sequencialCompra  \
count          2.188000e+03  2.188000e+03      2.188000e+03   
mean          -3.247453e-18  1.877807e-13      2.597962e-17   
std            1.000229e+00  1.000229e+00      1.000229e+00   
min           -6.100168e-02 -8.116849e-01     -5.029182e-01   
25%           -5.863380e-02 -8.116849e-01     -4.958260e-01   
50%           -5.432531e-02 -8.116849e-01     -4.414523e-01   
75%           -4.133326e-02  1.232005e+00      3.652867e-01   
max            3.691960e+01  1.232005e+00      2.023471e+01   

       valorTotalEstimado  unidadeOrgao.codigoIbge  
count        2.188000e+03             2.188000e+03  
mean        -3.247453e-18             2.597962e-16  
std          1.000229e+00             1.000229e+00  
min         -7.237697e-02            -3.684605e+00  
25%         -7.078153e-02            -3.562441e-01  
50%         -6.545051e-02             5.873110e-01  
75%         -4.063650e-02             5.933565e-01  
max          3.576946e+01             6.757970e-01  
2024-10-21 13:50:33,459 - INFO - Colunas: ['valorTotalHomologado', 'srp', 'anoCompra', 'sequencialCompra', 'valorTotalEstimado', 'unidadeOrgao.codigoIbge', 'modoDisputaId_4', 'modoDisputaId_5', 'situacaoCompraId_1', 'situacaoCompraId_2', 'situacaoCompraId_3', 'tipoInstrumentoConvocatorioCodigo_2', 'tipoInstrumentoConvocatorioCodigo_3', 'amparoLegal.codigo_18', 'amparoLegal.codigo_19', 'amparoLegal.codigo_20', 'amparoLegal.codigo_21', 'amparoLegal.codigo_22', 'amparoLegal.codigo_24', 'amparoLegal.codigo_36', 'amparoLegal.codigo_37', 'amparoLegal.codigo_38', 'amparoLegal.codigo_39', 'amparoLegal.codigo_41', 'amparoLegal.codigo_45', 'orgaoEntidade.poderId_E', 'orgaoEntidade.poderId_J', 'orgaoEntidade.poderId_L', 'orgaoEntidade.poderId_N', 'orgaoEntidade.esferaId_D', 'orgaoEntidade.esferaId_E', 'orgaoEntidade.esferaId_F', 'orgaoEntidade.esferaId_M', 'orgaoEntidade.esferaId_N']
2024-10-21 13:50:33,461 - INFO - Tentando treinar modelo: IsolationForest
2024-10-21 13:50:33,465 - ERROR - Erro ao treinar IsolationForest: wrapped() missing 1 required positional argument: 'X'
2024-10-21 13:50:33,468 - ERROR - Traceback completo:
Traceback (most recent call last):
  File "<ipython-input-9-a791408ffc22>", line 145, in train_validate_models
    X_preprocessed = pipeline.named_steps['preprocessor'].fit_transform(X)
TypeError: wrapped() missing 1 required positional argument: 'X'
2024-10-21 13:50:33,469 - INFO - Tentando treinar modelo: DBSCAN
2024-10-21 13:50:33,471 - ERROR - Erro ao treinar DBSCAN: wrapped() missing 1 required positional argument: 'X'
2024-10-21 13:50:33,478 - ERROR - Traceback completo:
Traceback (most recent call last):
  File "<ipython-input-9-a791408ffc22>", line 145, in train_validate_models
    X_preprocessed = pipeline.named_steps['preprocessor'].fit_transform(X)
TypeError: wrapped() missing 1 required positional argument: 'X'
2024-10-21 13:50:33,481 - INFO - Tentando treinar modelo: LOF
2024-10-21 13:50:33,483 - ERROR - Erro ao treinar LOF: wrapped() missing 1 required positional argument: 'X'
2024-10-21 13:50:33,486 - ERROR - Traceback completo:
Traceback (most recent call last):
  File "<ipython-input-9-a791408ffc22>", line 145, in train_validate_models
    X_preprocessed = pipeline.named_steps['preprocessor'].fit_transform(X)
TypeError: wrapped() missing 1 required positional argument: 'X'
2024-10-21 13:50:33,488 - INFO - Tentando treinar modelo: KMeans
2024-10-21 13:50:33,489 - ERROR - Erro ao treinar KMeans: wrapped() missing 1 required positional argument: 'X'
2024-10-21 13:50:33,493 - ERROR - Traceback completo:
Traceback (most recent call last):
  File "<ipython-input-9-a791408ffc22>", line 145, in train_validate_models
    X_preprocessed = pipeline.named_steps['preprocessor'].fit_transform(X)
TypeError: wrapped() missing 1 required positional argument: 'X'
2024-10-21 13:50:33,504 - ERROR - Erro durante a análise: None
2024-10-21 13:52:25,605 - INFO - Iniciando a carga dos dados do arquivo pickle...
2024-10-21 13:52:25,611 - INFO - Dados carregados com sucesso. Shape final: (2188, 38)
2024-10-21 13:52:25,615 - INFO - Colunas de data removidas. Shape final: (2188, 34)
2024-10-21 13:52:25,617 - INFO - Iniciando detecção de anomalias...
2024-10-21 13:52:25,619 - INFO - Iniciando treinamento e validação dos modelos...
2024-10-21 13:52:25,620 - INFO - Shape dos dados de entrada: (2188, 34)
2024-10-21 13:52:25,624 - INFO - Tipos de dados:
valorTotalHomologado                   float64
srp                                       bool
anoCompra                              float64
sequencialCompra                       float64
valorTotalEstimado                     float64
unidadeOrgao.codigoIbge                float64
modoDisputaId_4                           bool
modoDisputaId_5                           bool
situacaoCompraId_1                        bool
situacaoCompraId_2                        bool
situacaoCompraId_3                        bool
tipoInstrumentoConvocatorioCodigo_2       bool
tipoInstrumentoConvocatorioCodigo_3       bool
amparoLegal.codigo_18                     bool
amparoLegal.codigo_19                     bool
amparoLegal.codigo_20                     bool
amparoLegal.codigo_21                     bool
amparoLegal.codigo_22                     bool
amparoLegal.codigo_24                     bool
amparoLegal.codigo_36                     bool
amparoLegal.codigo_37                     bool
amparoLegal.codigo_38                     bool
amparoLegal.codigo_39                     bool
amparoLegal.codigo_41                     bool
amparoLegal.codigo_45                     bool
orgaoEntidade.poderId_E                   bool
orgaoEntidade.poderId_J                   bool
orgaoEntidade.poderId_L                   bool
orgaoEntidade.poderId_N                   bool
orgaoEntidade.esferaId_D                  bool
orgaoEntidade.esferaId_E                  bool
orgaoEntidade.esferaId_F                  bool
orgaoEntidade.esferaId_M                  bool
orgaoEntidade.esferaId_N                  bool
dtype: object
2024-10-21 13:52:25,670 - INFO - Resumo estatístico:
       valorTotalHomologado     anoCompra  sequencialCompra  \
count          2.188000e+03  2.188000e+03      2.188000e+03   
mean          -3.247453e-18  1.877807e-13      2.597962e-17   
std            1.000229e+00  1.000229e+00      1.000229e+00   
min           -6.100168e-02 -8.116849e-01     -5.029182e-01   
25%           -5.863380e-02 -8.116849e-01     -4.958260e-01   
50%           -5.432531e-02 -8.116849e-01     -4.414523e-01   
75%           -4.133326e-02  1.232005e+00      3.652867e-01   
max            3.691960e+01  1.232005e+00      2.023471e+01   

       valorTotalEstimado  unidadeOrgao.codigoIbge  
count        2.188000e+03             2.188000e+03  
mean        -3.247453e-18             2.597962e-16  
std          1.000229e+00             1.000229e+00  
min         -7.237697e-02            -3.684605e+00  
25%         -7.078153e-02            -3.562441e-01  
50%         -6.545051e-02             5.873110e-01  
75%         -4.063650e-02             5.933565e-01  
max          3.576946e+01             6.757970e-01  
2024-10-21 13:52:25,677 - INFO - Colunas: ['valorTotalHomologado', 'srp', 'anoCompra', 'sequencialCompra', 'valorTotalEstimado', 'unidadeOrgao.codigoIbge', 'modoDisputaId_4', 'modoDisputaId_5', 'situacaoCompraId_1', 'situacaoCompraId_2', 'situacaoCompraId_3', 'tipoInstrumentoConvocatorioCodigo_2', 'tipoInstrumentoConvocatorioCodigo_3', 'amparoLegal.codigo_18', 'amparoLegal.codigo_19', 'amparoLegal.codigo_20', 'amparoLegal.codigo_21', 'amparoLegal.codigo_22', 'amparoLegal.codigo_24', 'amparoLegal.codigo_36', 'amparoLegal.codigo_37', 'amparoLegal.codigo_38', 'amparoLegal.codigo_39', 'amparoLegal.codigo_41', 'amparoLegal.codigo_45', 'orgaoEntidade.poderId_E', 'orgaoEntidade.poderId_J', 'orgaoEntidade.poderId_L', 'orgaoEntidade.poderId_N', 'orgaoEntidade.esferaId_D', 'orgaoEntidade.esferaId_E', 'orgaoEntidade.esferaId_F', 'orgaoEntidade.esferaId_M', 'orgaoEntidade.esferaId_N']
2024-10-21 13:52:25,679 - INFO - Tentando treinar modelo: IsolationForest
2024-10-21 13:52:25,681 - ERROR - Erro ao treinar IsolationForest: wrapped() missing 1 required positional argument: 'X'
2024-10-21 13:52:25,683 - ERROR - Traceback completo:
Traceback (most recent call last):
  File "<ipython-input-10-71617769073e>", line 148, in train_validate_models
    X_preprocessed = pipeline.named_steps['preprocessor'].fit_transform(X)
TypeError: wrapped() missing 1 required positional argument: 'X'
2024-10-21 13:52:25,685 - INFO - Tentando treinar modelo: DBSCAN
2024-10-21 13:52:25,687 - ERROR - Erro ao treinar DBSCAN: wrapped() missing 1 required positional argument: 'X'
2024-10-21 13:52:25,688 - ERROR - Traceback completo:
Traceback (most recent call last):
  File "<ipython-input-10-71617769073e>", line 148, in train_validate_models
    X_preprocessed = pipeline.named_steps['preprocessor'].fit_transform(X)
TypeError: wrapped() missing 1 required positional argument: 'X'
2024-10-21 13:52:25,690 - INFO - Tentando treinar modelo: LOF
2024-10-21 13:52:25,701 - ERROR - Erro ao treinar LOF: wrapped() missing 1 required positional argument: 'X'
2024-10-21 13:52:25,703 - ERROR - Traceback completo:
Traceback (most recent call last):
  File "<ipython-input-10-71617769073e>", line 148, in train_validate_models
    X_preprocessed = pipeline.named_steps['preprocessor'].fit_transform(X)
TypeError: wrapped() missing 1 required positional argument: 'X'
2024-10-21 13:52:25,705 - INFO - Tentando treinar modelo: KMeans
2024-10-21 13:52:25,706 - ERROR - Erro ao treinar KMeans: wrapped() missing 1 required positional argument: 'X'
2024-10-21 13:52:25,709 - ERROR - Traceback completo:
Traceback (most recent call last):
  File "<ipython-input-10-71617769073e>", line 148, in train_validate_models
    X_preprocessed = pipeline.named_steps['preprocessor'].fit_transform(X)
TypeError: wrapped() missing 1 required positional argument: 'X'
2024-10-21 13:52:25,712 - ERROR - Erro durante a análise: None
2024-10-21 13:53:44,606 - INFO - Iniciando a carga dos dados do arquivo pickle...
2024-10-21 13:53:44,611 - INFO - Dados carregados com sucesso. Shape final: (2188, 38)
2024-10-21 13:53:44,614 - INFO - Colunas de data removidas. Shape final: (2188, 34)
2024-10-21 13:53:44,616 - INFO - Iniciando detecção de anomalias...
2024-10-21 13:53:44,618 - INFO - Iniciando treinamento e validação dos modelos...
2024-10-21 13:53:44,622 - INFO - Shape dos dados de entrada: (2188, 34)
2024-10-21 13:53:44,626 - INFO - Tipos de dados:
valorTotalHomologado                   float64
srp                                       bool
anoCompra                              float64
sequencialCompra                       float64
valorTotalEstimado                     float64
unidadeOrgao.codigoIbge                float64
modoDisputaId_4                           bool
modoDisputaId_5                           bool
situacaoCompraId_1                        bool
situacaoCompraId_2                        bool
situacaoCompraId_3                        bool
tipoInstrumentoConvocatorioCodigo_2       bool
tipoInstrumentoConvocatorioCodigo_3       bool
amparoLegal.codigo_18                     bool
amparoLegal.codigo_19                     bool
amparoLegal.codigo_20                     bool
amparoLegal.codigo_21                     bool
amparoLegal.codigo_22                     bool
amparoLegal.codigo_24                     bool
amparoLegal.codigo_36                     bool
amparoLegal.codigo_37                     bool
amparoLegal.codigo_38                     bool
amparoLegal.codigo_39                     bool
amparoLegal.codigo_41                     bool
amparoLegal.codigo_45                     bool
orgaoEntidade.poderId_E                   bool
orgaoEntidade.poderId_J                   bool
orgaoEntidade.poderId_L                   bool
orgaoEntidade.poderId_N                   bool
orgaoEntidade.esferaId_D                  bool
orgaoEntidade.esferaId_E                  bool
orgaoEntidade.esferaId_F                  bool
orgaoEntidade.esferaId_M                  bool
orgaoEntidade.esferaId_N                  bool
dtype: object
2024-10-21 13:53:44,653 - INFO - Resumo estatístico:
       valorTotalHomologado     anoCompra  sequencialCompra  \
count          2.188000e+03  2.188000e+03      2.188000e+03   
mean          -3.247453e-18  1.877807e-13      2.597962e-17   
std            1.000229e+00  1.000229e+00      1.000229e+00   
min           -6.100168e-02 -8.116849e-01     -5.029182e-01   
25%           -5.863380e-02 -8.116849e-01     -4.958260e-01   
50%           -5.432531e-02 -8.116849e-01     -4.414523e-01   
75%           -4.133326e-02  1.232005e+00      3.652867e-01   
max            3.691960e+01  1.232005e+00      2.023471e+01   

       valorTotalEstimado  unidadeOrgao.codigoIbge  
count        2.188000e+03             2.188000e+03  
mean        -3.247453e-18             2.597962e-16  
std          1.000229e+00             1.000229e+00  
min         -7.237697e-02            -3.684605e+00  
25%         -7.078153e-02            -3.562441e-01  
50%         -6.545051e-02             5.873110e-01  
75%         -4.063650e-02             5.933565e-01  
max          3.576946e+01             6.757970e-01  
2024-10-21 13:53:44,657 - INFO - Colunas: ['valorTotalHomologado', 'srp', 'anoCompra', 'sequencialCompra', 'valorTotalEstimado', 'unidadeOrgao.codigoIbge', 'modoDisputaId_4', 'modoDisputaId_5', 'situacaoCompraId_1', 'situacaoCompraId_2', 'situacaoCompraId_3', 'tipoInstrumentoConvocatorioCodigo_2', 'tipoInstrumentoConvocatorioCodigo_3', 'amparoLegal.codigo_18', 'amparoLegal.codigo_19', 'amparoLegal.codigo_20', 'amparoLegal.codigo_21', 'amparoLegal.codigo_22', 'amparoLegal.codigo_24', 'amparoLegal.codigo_36', 'amparoLegal.codigo_37', 'amparoLegal.codigo_38', 'amparoLegal.codigo_39', 'amparoLegal.codigo_41', 'amparoLegal.codigo_45', 'orgaoEntidade.poderId_E', 'orgaoEntidade.poderId_J', 'orgaoEntidade.poderId_L', 'orgaoEntidade.poderId_N', 'orgaoEntidade.esferaId_D', 'orgaoEntidade.esferaId_E', 'orgaoEntidade.esferaId_F', 'orgaoEntidade.esferaId_M', 'orgaoEntidade.esferaId_N']
2024-10-21 13:53:44,659 - INFO - Tentando treinar modelo: IsolationForest
2024-10-21 13:53:44,691 - INFO - Usando fit_predict para IsolationForest
2024-10-21 13:53:45,032 - INFO - Modelo IsolationForest treinado com sucesso
2024-10-21 13:53:45,315 - WARNING - Erro ao calcular índice Dunn: name 'unique_labels' is not defined
2024-10-21 13:53:45,316 - INFO - Métricas calculadas para IsolationForest: {'mean_silhouette': 0.2978871772881016, 'mean_dunn': 0.0}
2024-10-21 13:53:45,318 - INFO - Tentando treinar modelo: DBSCAN
2024-10-21 13:53:45,328 - INFO - Usando fit_predict para DBSCAN
2024-10-21 13:53:45,410 - INFO - Modelo DBSCAN treinado com sucesso
2024-10-21 13:53:45,590 - WARNING - Erro ao calcular índice Dunn: name 'unique_labels' is not defined
2024-10-21 13:53:45,592 - INFO - Métricas calculadas para DBSCAN: {'mean_silhouette': 0.6199220975998196, 'mean_dunn': 0.0}
2024-10-21 13:53:45,593 - INFO - Tentando treinar modelo: LOF
2024-10-21 13:53:45,601 - INFO - Usando fit_predict para LOF
2024-10-21 13:53:45,671 - INFO - Modelo LOF treinado com sucesso
2024-10-21 13:53:45,831 - WARNING - Erro ao calcular índice Dunn: name 'unique_labels' is not defined
2024-10-21 13:53:45,832 - INFO - Métricas calculadas para LOF: {'mean_silhouette': 0.23747276755810467, 'mean_dunn': 0.0}
2024-10-21 13:53:45,833 - INFO - Tentando treinar modelo: KMeans
2024-10-21 13:53:45,843 - INFO - Usando fit_predict para KMeans
2024-10-21 13:53:45,886 - INFO - Modelo KMeans treinado com sucesso
2024-10-21 13:53:46,058 - WARNING - Erro ao calcular índice Dunn: name 'unique_labels' is not defined
2024-10-21 13:53:46,060 - INFO - Métricas calculadas para KMeans: {'mean_silhouette': 0.9346844436767242, 'mean_dunn': 0.0}
2024-10-21 13:53:47,948 - INFO - Visualização salva em anomaly_detection_results_20241021_135346.png
2024-10-21 13:53:47,949 - INFO - 
        Análise concluída com sucesso!
        Melhor modelo: KMeans
        
2024-10-21 14:08:23,632 - INFO - Iniciando a carga dos dados do arquivo pickle...
2024-10-21 14:08:23,632 - INFO - Dados carregados com sucesso. Shape final: (2188, 38)
2024-10-21 14:08:23,649 - INFO - Colunas de data removidas. Shape final: (2188, 34)
2024-10-21 14:08:23,649 - INFO - Iniciando detecção de anomalias...
2024-10-21 14:08:23,649 - INFO - Iniciando treinamento e validação dos modelos...
2024-10-21 14:08:23,649 - INFO - Shape dos dados de entrada: (2188, 34)
2024-10-21 14:08:23,649 - INFO - Tipos de dados:
valorTotalHomologado                   float64
srp                                       bool
anoCompra                              float64
sequencialCompra                       float64
valorTotalEstimado                     float64
unidadeOrgao.codigoIbge                float64
modoDisputaId_4                           bool
modoDisputaId_5                           bool
situacaoCompraId_1                        bool
situacaoCompraId_2                        bool
situacaoCompraId_3                        bool
tipoInstrumentoConvocatorioCodigo_2       bool
tipoInstrumentoConvocatorioCodigo_3       bool
amparoLegal.codigo_18                     bool
amparoLegal.codigo_19                     bool
amparoLegal.codigo_20                     bool
amparoLegal.codigo_21                     bool
amparoLegal.codigo_22                     bool
amparoLegal.codigo_24                     bool
amparoLegal.codigo_36                     bool
amparoLegal.codigo_37                     bool
amparoLegal.codigo_38                     bool
amparoLegal.codigo_39                     bool
amparoLegal.codigo_41                     bool
amparoLegal.codigo_45                     bool
orgaoEntidade.poderId_E                   bool
orgaoEntidade.poderId_J                   bool
orgaoEntidade.poderId_L                   bool
orgaoEntidade.poderId_N                   bool
orgaoEntidade.esferaId_D                  bool
orgaoEntidade.esferaId_E                  bool
orgaoEntidade.esferaId_F                  bool
orgaoEntidade.esferaId_M                  bool
orgaoEntidade.esferaId_N                  bool
dtype: object
2024-10-21 14:08:23,688 - INFO - Resumo estatístico:
       valorTotalHomologado     anoCompra  sequencialCompra  \
count          2.188000e+03  2.188000e+03      2.188000e+03   
mean          -3.247453e-18  1.877807e-13      2.597962e-17   
std            1.000229e+00  1.000229e+00      1.000229e+00   
min           -6.100168e-02 -8.116849e-01     -5.029182e-01   
25%           -5.863380e-02 -8.116849e-01     -4.958260e-01   
50%           -5.432531e-02 -8.116849e-01     -4.414523e-01   
75%           -4.133326e-02  1.232005e+00      3.652867e-01   
max            3.691960e+01  1.232005e+00      2.023471e+01   

       valorTotalEstimado  unidadeOrgao.codigoIbge  
count        2.188000e+03             2.188000e+03  
mean        -3.247453e-18             2.597962e-16  
std          1.000229e+00             1.000229e+00  
min         -7.237697e-02            -3.684605e+00  
25%         -7.078153e-02            -3.562441e-01  
50%         -6.545051e-02             5.873110e-01  
75%         -4.063650e-02             5.933565e-01  
max          3.576946e+01             6.757970e-01  
2024-10-21 14:08:23,688 - INFO - Colunas: ['valorTotalHomologado', 'srp', 'anoCompra', 'sequencialCompra', 'valorTotalEstimado', 'unidadeOrgao.codigoIbge', 'modoDisputaId_4', 'modoDisputaId_5', 'situacaoCompraId_1', 'situacaoCompraId_2', 'situacaoCompraId_3', 'tipoInstrumentoConvocatorioCodigo_2', 'tipoInstrumentoConvocatorioCodigo_3', 'amparoLegal.codigo_18', 'amparoLegal.codigo_19', 'amparoLegal.codigo_20', 'amparoLegal.codigo_21', 'amparoLegal.codigo_22', 'amparoLegal.codigo_24', 'amparoLegal.codigo_36', 'amparoLegal.codigo_37', 'amparoLegal.codigo_38', 'amparoLegal.codigo_39', 'amparoLegal.codigo_41', 'amparoLegal.codigo_45', 'orgaoEntidade.poderId_E', 'orgaoEntidade.poderId_J', 'orgaoEntidade.poderId_L', 'orgaoEntidade.poderId_N', 'orgaoEntidade.esferaId_D', 'orgaoEntidade.esferaId_E', 'orgaoEntidade.esferaId_F', 'orgaoEntidade.esferaId_M', 'orgaoEntidade.esferaId_N']
2024-10-21 14:08:23,688 - INFO - Tentando treinar modelo: IsolationForest
2024-10-21 14:08:23,711 - INFO - Usando fit_predict para IsolationForest
2024-10-21 14:08:23,952 - INFO - Modelo IsolationForest treinado com sucesso
2024-10-21 14:08:24,079 - WARNING - Erro ao calcular índice Dunn: name 'unique_labels' is not defined
2024-10-21 14:08:24,079 - INFO - Métricas calculadas para IsolationForest: {'mean_silhouette': 0.2978871772881016, 'mean_dunn': 0.0}
2024-10-21 14:08:24,079 - INFO - Tentando treinar modelo: DBSCAN
2024-10-21 14:08:24,079 - INFO - Usando fit_predict para DBSCAN
2024-10-21 14:08:24,483 - INFO - Modelo DBSCAN treinado com sucesso
2024-10-21 14:08:24,612 - WARNING - Erro ao calcular índice Dunn: name 'unique_labels' is not defined
2024-10-21 14:08:24,612 - INFO - Métricas calculadas para DBSCAN: {'mean_silhouette': 0.6199220975998196, 'mean_dunn': 0.0}
2024-10-21 14:08:24,612 - INFO - Tentando treinar modelo: LOF
2024-10-21 14:08:24,628 - INFO - Usando fit_predict para LOF
2024-10-21 14:08:24,683 - INFO - Modelo LOF treinado com sucesso
2024-10-21 14:08:24,798 - WARNING - Erro ao calcular índice Dunn: name 'unique_labels' is not defined
2024-10-21 14:08:24,798 - INFO - Métricas calculadas para LOF: {'mean_silhouette': 0.23747276755810467, 'mean_dunn': 0.0}
2024-10-21 14:08:24,798 - INFO - Tentando treinar modelo: KMeans
2024-10-21 14:08:24,798 - INFO - Usando fit_predict para KMeans
2024-10-21 14:08:24,867 - INFO - Modelo KMeans treinado com sucesso
2024-10-21 14:08:25,017 - WARNING - Erro ao calcular índice Dunn: name 'unique_labels' is not defined
2024-10-21 14:08:25,017 - INFO - Métricas calculadas para KMeans: {'mean_silhouette': 0.9346844436767242, 'mean_dunn': 0.0}
2024-10-21 14:08:26,204 - INFO - Visualização salva em anomaly_detection_results_20241021_140825.png
2024-10-21 14:08:26,204 - INFO - 
        Análise concluída com sucesso!
        Melhor modelo: KMeans
        
2024-10-21 14:15:23,797 - INFO - Iniciando a carga dos dados do arquivo pickle...
2024-10-21 14:15:23,824 - INFO - Dados carregados com sucesso. Shape final: (2188, 38)
2024-10-21 14:15:23,828 - INFO - Colunas de data removidas. Shape final: (2188, 34)
2024-10-21 14:15:23,829 - INFO - Iniciando detecção de anomalias...
2024-10-21 14:15:23,831 - INFO - Iniciando treinamento e validação dos modelos...
2024-10-21 14:15:23,833 - INFO - Shape dos dados de entrada: (2188, 34)
2024-10-21 14:15:23,837 - INFO - Tipos de dados:
valorTotalHomologado                   float64
srp                                       bool
anoCompra                              float64
sequencialCompra                       float64
valorTotalEstimado                     float64
unidadeOrgao.codigoIbge                float64
modoDisputaId_4                           bool
modoDisputaId_5                           bool
situacaoCompraId_1                        bool
situacaoCompraId_2                        bool
situacaoCompraId_3                        bool
tipoInstrumentoConvocatorioCodigo_2       bool
tipoInstrumentoConvocatorioCodigo_3       bool
amparoLegal.codigo_18                     bool
amparoLegal.codigo_19                     bool
amparoLegal.codigo_20                     bool
amparoLegal.codigo_21                     bool
amparoLegal.codigo_22                     bool
amparoLegal.codigo_24                     bool
amparoLegal.codigo_36                     bool
amparoLegal.codigo_37                     bool
amparoLegal.codigo_38                     bool
amparoLegal.codigo_39                     bool
amparoLegal.codigo_41                     bool
amparoLegal.codigo_45                     bool
orgaoEntidade.poderId_E                   bool
orgaoEntidade.poderId_J                   bool
orgaoEntidade.poderId_L                   bool
orgaoEntidade.poderId_N                   bool
orgaoEntidade.esferaId_D                  bool
orgaoEntidade.esferaId_E                  bool
orgaoEntidade.esferaId_F                  bool
orgaoEntidade.esferaId_M                  bool
orgaoEntidade.esferaId_N                  bool
dtype: object
2024-10-21 14:15:23,885 - INFO - Resumo estatístico:
       valorTotalHomologado     anoCompra  sequencialCompra  \
count          2.188000e+03  2.188000e+03      2.188000e+03   
mean          -3.247453e-18  1.877807e-13      2.597962e-17   
std            1.000229e+00  1.000229e+00      1.000229e+00   
min           -6.100168e-02 -8.116849e-01     -5.029182e-01   
25%           -5.863380e-02 -8.116849e-01     -4.958260e-01   
50%           -5.432531e-02 -8.116849e-01     -4.414523e-01   
75%           -4.133326e-02  1.232005e+00      3.652867e-01   
max            3.691960e+01  1.232005e+00      2.023471e+01   

       valorTotalEstimado  unidadeOrgao.codigoIbge  
count        2.188000e+03             2.188000e+03  
mean        -3.247453e-18             2.597962e-16  
std          1.000229e+00             1.000229e+00  
min         -7.237697e-02            -3.684605e+00  
25%         -7.078153e-02            -3.562441e-01  
50%         -6.545051e-02             5.873110e-01  
75%         -4.063650e-02             5.933565e-01  
max          3.576946e+01             6.757970e-01  
2024-10-21 14:15:23,889 - INFO - Colunas: ['valorTotalHomologado', 'srp', 'anoCompra', 'sequencialCompra', 'valorTotalEstimado', 'unidadeOrgao.codigoIbge', 'modoDisputaId_4', 'modoDisputaId_5', 'situacaoCompraId_1', 'situacaoCompraId_2', 'situacaoCompraId_3', 'tipoInstrumentoConvocatorioCodigo_2', 'tipoInstrumentoConvocatorioCodigo_3', 'amparoLegal.codigo_18', 'amparoLegal.codigo_19', 'amparoLegal.codigo_20', 'amparoLegal.codigo_21', 'amparoLegal.codigo_22', 'amparoLegal.codigo_24', 'amparoLegal.codigo_36', 'amparoLegal.codigo_37', 'amparoLegal.codigo_38', 'amparoLegal.codigo_39', 'amparoLegal.codigo_41', 'amparoLegal.codigo_45', 'orgaoEntidade.poderId_E', 'orgaoEntidade.poderId_J', 'orgaoEntidade.poderId_L', 'orgaoEntidade.poderId_N', 'orgaoEntidade.esferaId_D', 'orgaoEntidade.esferaId_E', 'orgaoEntidade.esferaId_F', 'orgaoEntidade.esferaId_M', 'orgaoEntidade.esferaId_N']
2024-10-21 14:15:23,889 - INFO - Tentando treinar modelo: IsolationForest
2024-10-21 14:15:23,907 - INFO - Usando fit_predict para IsolationForest
2024-10-21 14:15:24,305 - INFO - Modelo IsolationForest treinado com sucesso
2024-10-21 14:15:24,438 - WARNING - Erro ao calcular índice Dunn: name 'unique_labels' is not defined
2024-10-21 14:15:24,438 - INFO - Métricas calculadas para IsolationForest: {'mean_silhouette': 0.2978871772881016, 'mean_dunn': 0.0}
2024-10-21 14:15:24,438 - INFO - Tentando treinar modelo: DBSCAN
2024-10-21 14:15:24,454 - INFO - Usando fit_predict para DBSCAN
2024-10-21 14:15:24,505 - INFO - Modelo DBSCAN treinado com sucesso
2024-10-21 14:15:24,638 - WARNING - Erro ao calcular índice Dunn: name 'unique_labels' is not defined
2024-10-21 14:15:24,640 - INFO - Métricas calculadas para DBSCAN: {'mean_silhouette': 0.6199220975998196, 'mean_dunn': 0.0}
2024-10-21 14:15:24,642 - INFO - Tentando treinar modelo: LOF
2024-10-21 14:15:24,642 - INFO - Usando fit_predict para LOF
2024-10-21 14:15:24,689 - INFO - Modelo LOF treinado com sucesso
2024-10-21 14:15:24,862 - WARNING - Erro ao calcular índice Dunn: name 'unique_labels' is not defined
2024-10-21 14:15:24,864 - INFO - Métricas calculadas para LOF: {'mean_silhouette': 0.23747276755810467, 'mean_dunn': 0.0}
2024-10-21 14:15:24,866 - INFO - Tentando treinar modelo: KMeans
2024-10-21 14:15:24,878 - INFO - Usando fit_predict para KMeans
2024-10-21 14:15:24,923 - INFO - Modelo KMeans treinado com sucesso
2024-10-21 14:15:25,098 - WARNING - Erro ao calcular índice Dunn: name 'unique_labels' is not defined
2024-10-21 14:15:25,100 - INFO - Métricas calculadas para KMeans: {'mean_silhouette': 0.9346844436767242, 'mean_dunn': 0.0}
2024-10-21 14:15:26,355 - INFO - Visualização salva em anomaly_detection_results_20241021_141525.png
2024-10-21 14:15:26,355 - INFO - 
        Análise concluída com sucesso!
        Melhor modelo: KMeans
        
